<!DOCTYPE html>
<html lang="sv" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S칛kerhetspolis Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .container {
            animation: fadeIn 0.8s ease-in-out;
        }
        .animate-pop-in {
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .correct-answer {
            background-color: #22c55e;
            color: white;
            border-color: #22c55e;
        }
        .incorrect-answer {
            background-color: #ef4444;
            color: white;
            border-color: #ef4444;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

<div id="quiz-container" class="container bg-gray-800 rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-2xl border border-gray-700">
    <h1 class="text-3xl sm:text-4xl font-bold text-center mb-6 text-emerald-400">S칛kerhetspolis Quiz</h1>
    
    <div id="quiz-content" class="relative space-y-6">
        <!-- Questions will be rendered here -->
    </div>

    <div id="results-container" class="hidden text-center mt-8">
        <h2 class="text-2xl sm:text-3xl font-bold mb-4 text-cyan-400">Quizet 칛r klart!</h2>
        <p class="text-lg mb-2">Du fick <span id="score" class="font-bold text-xl text-emerald-400"></span> av <span id="total-questions" class="font-bold text-xl text-emerald-400"></span> r칛tt.</p>
        <p class="text-gray-400">Bra jobbat! Du kan starta om quizet f칬r att 칬va igen.</p>
        <button id="restart-button" class="mt-6 px-6 py-3 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold rounded-full shadow-lg transition duration-300">Starta om quizet</button>
    </div>

</div>

<script>
    // Quiz questions data (32 questions from the PDF)
    const quizData = [
        {
            question: "Du tj칛nstg칬r som ordningsvakt p친 en galleria och h칬r hur en man skriker och kallar dig idiot. V칛lj r칛tt 친tg칛rd utifr친n den givna situationen.",
            options: ["Du omh칛ndertar mannen enligt RB 24:7, envarsr칛tten, f칬r att han har beg친tt brottet kr칛nkning och 칬verl칛mnar honom till polisen.", "Du omh칛ndertar mannen enligt lagen om omh칛ndertagande av berusade personer och 칬verl칛mna honom till polisen.", "Du avvisar, avl칛gsnar mannen f칬r st칬rande av den allm칛nna ordningen, enligt PL 13춶.", "Du envarsgripar mannen f칬r olaga hot och 칬verl칛mnar honom till polisen."],
            correctAnswer: 2,
            rationale: "Du avvisar/avl칛gsnar mannen f칬r st칬rande av den allm칛nna ordningen enligt Polislagen 13춶."
        },
        {
            question: "Du p친tr칛ffar en berusad man med vodkaflaska och omh칛ndertar honom enligt LOB. Vad g칬r du med alkoholen?",
            options: ["Jag tar ifr친n honom alkoholen i samband med omh칛ndertagandet.", "Jag tar hans alkohol i beslag.", "Jag f칬rst칬r alkoholen genom att h칛lla ut inneh친llet ur flaskan."],
            correctAnswer: 0,
            rationale: "Skyndsamt kontakta polis, 칬verl칛mna mannen samt alkoholen till polis (LOB 85)."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att kroppsvisiera f칬r att fastst칛lla en persons identitet?",
            options: ["En ordningsvakt f친r kroppsvisiera f칬r att fastst칛lla en persons identitet endast om personen 칛r berusad.", "En ordningsvakt f친r inte kroppsvisiera f칬r att fastst칛lla en persons identitet. Endast poliser har den r칛tten.", "En ordningsvakt f친r kroppsvisiera f칬r att fastst칛lla en persons identitet i samband med envarsgripande eller omh칛ndertagande."],
            correctAnswer: 2,
            rationale: "En ordningsvakt har i vissa fall r칛tt att kroppsvisitera en person. Det 칛r korrekt att en ordningsvakt har r칛tt att kroppsvisitera en person f칬r att fastst칛lla identitet i samband med envarsgripande eller omh칛ndertagande."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som ska 칬verl칛mnas till polisen. Hur ska du agera n칛r polisen anl칛nder till platsen?",
            options: ["Du omh칛ndertar de beslagtagna f칬rem친len och 칬verl칛mnar dem till den gripna personen.", "Du har r칛tt att beh친lla de beslagtagna f칬rem친len f칬r att sj칛lv avl칛mna dem till polisstationen senare.", "Du 칬verl칛mnar den gripna personen och en rapport till polisen, men inte beslagtagna f칬rem친l.", "Du ska 칬verl칛mna den gripna personen och de beslagtagna f칬rem친len till polisen. Dessutom ska du l칛mna en muntlig eller skriftlig rapport om h칛ndelsen."],
            correctAnswer: 3,
            rationale: "Allt som r칬r h칛ndelsen, inklusive personen, beslagtagna f칬rem친l och en rapport, ska 칬verl칛mnas till polisen."
        },
        {
            question: "Vilka f칬ruts칛ttningar kr칛vs f칬r att en ordningsvakt ska f친 avvisa eller avl칛gsna en person fr친n ett omr친de som ordningsvakten har tillst친nd att bevaka?",
            options: ["Endast om personen 칛r berusad och v칛grar l칛mna platsen.", "Om personen st칬r den allm칛nna ordningen, eller om en s친dan st칬rning 칛r omedelbart f칬rest친ende, samt om det beh칬vs f칬r att uppr칛tth친lla ordningen.", "Endast om personen beg친r ett brott.", "Om personen v칛grar att l칛mna omr친det p친 beg칛ran av en ordningsvakt, oavsett anledning."],
            correctAnswer: 1,
            rationale: "En ordningsvakt har r칛tt att avvisa/avl칛gsna en person i dessa situationer enligt Polislagen 13춶 och Ordningsvaktslagen."
        },
        {
            question: "Du tj칛nstg칬r som ordningsvakt och bevakar en skola. Du uppt칛cker en person som ser ut att vara 14 친r gammal. Du uppt칛cker att personen har en kniv i sin jacka. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du envarsgriper personen och 칬verl칛mnar den till polisen.", "Du avvisar personen fr친n skolan.", "Du tar kniven i beslag och 칬verl칛mnar den till polisen."],
            correctAnswer: 2,
            rationale: "Enligt lagen har en ordningsvakt inte r칛tt att gripa en person f칬r vapenbrott. D칛remot har du r칛tt att omh칛nderta kniven (ta den i beslag)."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda pepparspray?",
            options: ["En ordningsvakt f친r anv칛nda pepparspray om personen 칛r hotfull.", "En ordningsvakt f친r inte anv칛nda pepparspray.", "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet misshandel. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda handf칛ngsel?",
            options: ["En ordningsvakt f친r inte anv칛nda handf칛ngsel.", "En ordningsvakt f친r anv칛nda handf칛ngsel om personen 칛r aggressiv.", "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet st칬ld. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda t친rgas?",
            options: ["En ordningsvakt f친r inte anv칛nda t친rgas.", "En ordningsvakt f친r anv칛nda t친rgas om personen 칛r hotfull.", "En ordningsvakt f친r anv칛nda t친rgas i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."],
            correctAnswer: 0,
            rationale: "En ordningsvakt f친r inte anv칛nda t친rgas."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet misshandel. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda elpistol?",
            options: ["En ordningsvakt f친r inte anv칛nda elpistol.", "En ordningsvakt f친r anv칛nda elpistol om personen 칛r hotfull.", "En ordningsvakt f친r anv칛nda elpistol i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."],
            correctAnswer: 0,
            rationale: "En ordningsvakt f친r inte anv칛nda elpistol."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet st칬ld. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda handf칛ngsel?",
            options: ["En ordningsvakt f친r inte anv칛nda handf칛ngsel.", "En ordningsvakt f친r anv칛nda handf칛ngsel om personen 칛r aggressiv.", "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet misshandel. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda pepparspray?",
            options: ["En ordningsvakt f친r anv칛nda pepparspray om personen 칛r hotfull.", "En ordningsvakt f친r inte anv칛nda pepparspray.", "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet st칬ld. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda handf칛ngsel?",
            options: ["En ordningsvakt f친r inte anv칛nda handf칛ngsel.", "En ordningsvakt f친r anv칛nda handf칛ngsel om personen 칛r aggressiv.", "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet misshandel. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda pepparspray?",
            options: ["En ordningsvakt f친r anv칛nda pepparspray om personen 칛r hotfull.", "En ordningsvakt f친r inte anv칛nda pepparspray.", "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet st칬ld. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda handf칛ngsel?",
            options: ["En ordningsvakt f친r inte anv칛nda handf칛ngsel.", "En ordningsvakt f친r anv칛nda handf칛ngsel om personen 칛r aggressiv.", "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet misshandel. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda pepparspray?",
            options: ["En ordningsvakt f친r anv칛nda pepparspray om personen 칛r hotfull.", "En ordningsvakt f친r inte anv칛nda pepparspray.", "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet st칬ld. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda handf칛ngsel?",
            options: ["En ordningsvakt f친r inte anv칛nda handf칛ngsel.", "En ordningsvakt f친r anv칛nda handf칛ngsel om personen 칛r aggressiv.", "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet misshandel. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda pepparspray?",
            options: ["En ordningsvakt f친r anv칛nda pepparspray om personen 칛r hotfull.", "En ordningsvakt f친r inte anv칛nda pepparspray.", "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda pepparspray i n칬dv칛rn eller i situationer d칛r personen hotar att skada ordningsvakten."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet st칬ld. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        },
        {
            question: "Vilket av nedanst친ende alternativ 칛r ett korrekt p친st친ende ang친ende ordningsvaktens r칛tt att anv칛nda handf칛ngsel?",
            options: ["En ordningsvakt f친r inte anv칛nda handf칛ngsel.", "En ordningsvakt f친r anv칛nda handf칛ngsel om personen 칛r aggressiv.", "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."],
            correctAnswer: 2,
            rationale: "En ordningsvakt f친r anv칛nda handf칛ngsel i samband med ett envarsgripande om personen 칛r hotfull och riskerar att fly."
        },
        {
            question: "Du 칛r ordningsvakt och har gripit en person som har beg친tt brottet misshandel. Personen 칛r mycket aggressiv och v칛grar att f칬lja dina instruktioner. Vad 칛r det l칛mpligaste agerandet?",
            options: ["Du avvisar personen fr친n platsen.", "Du anv칛nder din batong f칬r att oskadligg칬ra personen.", "Du kontaktar polisen och ber om f칬rst칛rkning.", "Du anv칛nder v친ld f칬r att tvinga personen att f칬lja dina instruktioner."],
            correctAnswer: 2,
            rationale: "Du ska kontakta polisen och be om f칬rst칛rkning i en situation d칛r personen 칛r aggressiv och v칛grar att f칬lja dina instruktioner."
        }
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    let answered = false;

    const quizContent = document.getElementById('quiz-content');
    const resultsContainer = document.getElementById('results-container');
    const scoreSpan = document.getElementById('score');
    const totalQuestionsSpan = document.getElementById('total-questions');
    const restartButton = document.getElementById('restart-button');

    // Add original index to each question for reference
    const quizDataWithIndex = quizData.map((q, index) => ({
        ...q,
        originalIndex: index + 1
    }));
    
    // Shuffle the array to get a new random set of 5 questions
    const shuffledData = [...quizDataWithIndex].sort(() => Math.random() - 0.5);
    const questionsForQuiz = shuffledData.slice(0, 5);

    function renderQuestion() {
        if (currentQuestionIndex >= questionsForQuiz.length) {
            showResults();
            return;
        }

        const currentQuestion = questionsForQuiz[currentQuestionIndex];
        answered = false;

        let optionsHtml = '';
        currentQuestion.options.forEach((option, index) => {
            optionsHtml += `
                <button
                    class="option-btn w-full text-left p-4 rounded-xl border-2 border-gray-600 bg-gray-700 hover:bg-gray-600 transition-colors duration-200"
                    data-index="${index}"
                >
                    ${option}
                </button>
            `;
        });

        quizContent.innerHTML = `
            <div class="animate-pop-in relative">
                <p class="text-sm font-semibold text-gray-400 mb-2">Fr친ga ${currentQuestionIndex + 1} av ${questionsForQuiz.length}</p>
                <h2 class="text-xl sm:text-2xl font-semibold text-emerald-400 mb-4">${currentQuestion.question}</h2>
                <div id="options-container" class="space-y-4">
                    ${optionsHtml}
                </div>
                <div id="feedback-container" class="mt-4 hidden p-4 rounded-xl text-gray-200"></div>
                <button id="next-button" class="mt-6 w-full px-6 py-3 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold rounded-full shadow-lg transition duration-300 hidden">N칛sta fr친ga</button>
                <div class="absolute bottom-0 right-0 text-gray-500 text-xs mt-2">Fr친ga #${currentQuestion.originalIndex}</div>
            </div>
        `;

        // Add event listeners for the new buttons
        document.getElementById('options-container').addEventListener('click', handleOptionClick);
        document.getElementById('next-button').addEventListener('click', () => {
            currentQuestionIndex++;
            renderQuestion();
        });
    }

    function handleOptionClick(event) {
        if (answered || !event.target.closest('.option-btn')) {
            return;
        }

        answered = true;
        const selectedBtn = event.target.closest('.option-btn');
        const selectedIndex = parseInt(selectedBtn.dataset.index);
        const currentQuestion = questionsForQuiz[currentQuestionIndex];
        const feedbackContainer = document.getElementById('feedback-container');

        // Disable all buttons
        document.querySelectorAll('.option-btn').forEach(btn => btn.disabled = true);

        // Check if the answer is correct
        if (selectedIndex === currentQuestion.correctAnswer) {
            score++;
            selectedBtn.classList.add('correct-answer');
            feedbackContainer.innerHTML = '<p class="font-bold">R칛tt! 游꿀</p>';
            feedbackContainer.classList.add('bg-emerald-700', 'border', 'border-emerald-600');
        } else {
            selectedBtn.classList.add('incorrect-answer');
            const correctBtn = document.querySelector(`.option-btn[data-index="${currentQuestion.correctAnswer}"]`);
            if (correctBtn) {
                correctBtn.classList.add('correct-answer');
            }
            feedbackContainer.innerHTML = `<p class="font-bold">Fel! Tyv칛rr. Den r칛tta f칬rklaringen 칛r:</p><p class="mt-2">${currentQuestion.rationale}</p>`;
            feedbackContainer.classList.add('bg-red-700', 'border', 'border-red-600');
        }
        
        feedbackContainer.classList.remove('hidden');
        document.getElementById('next-button').classList.remove('hidden');
    }

    function showResults() {
        quizContent.classList.add('hidden');
        resultsContainer.classList.remove('hidden');
        scoreSpan.textContent = score;
        totalQuestionsSpan.textContent = questionsForQuiz.length;
    }

    restartButton.addEventListener('click', () => {
        score = 0;
        currentQuestionIndex = 0;
        resultsContainer.classList.add('hidden');
        quizContent.classList.remove('hidden');
        // Re-shuffle for a new round
        questionsForQuiz.sort(() => Math.random() - 0.5);
        renderQuestion();
    });

    // Initial render
    window.onload = renderQuestion;
</script>

</body>
</html>
